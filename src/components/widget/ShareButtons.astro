---
import SocialIcon from "./SocialIcon.astro";
import SocialCopy from "./SocialIconCopy.astro";
interface Props {
  url: string;
  title: string;
}

const { url, title } = Astro.props;

const shareLinks = [
  {
    platform: "Facebook",
    icon: "tabler:brand-facebook",
    url: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`,
  },
  {
    platform: "Twitter",
    icon: "tabler:brand-twitter",
    url: `https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`,
  },
  {
    platform: "LinkedIn",
    icon: "tabler:brand-linkedin",
    url: `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}`,
  },
  {
    platform: "WhatsApp",
    icon: "tabler:brand-whatsapp",
    url: `https://wa.me/?text=${encodeURIComponent(title + " " + url)}`,
  },
  {
    platform: "Telegram",
    icon: "tabler:brand-telegram",
    url: `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`,
  },
  {
    platform: "Reddit",
    icon: "tabler:brand-reddit",
    url: `https://reddit.com/submit?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}`,
  },
  {
    platform: "Email",
    icon: "tabler:mail",
    url: `mailto:?subject=${encodeURIComponent(title)}&body=${encodeURIComponent(url)}`,
  },
  {
    platform: "Copy Link",
    icon: "tabler:copy",
    url: "#",
    action: "copy",
  },
];
---

<div class="share-buttons flex flex-row">
  {
    shareLinks.map(({ platform, icon, url, action }) =>
      action === "copy" ? (
        <SocialCopy name={icon} />
      ) : (
        <SocialIcon name={icon} link={url} />
      ),
    )
  }
</div>
